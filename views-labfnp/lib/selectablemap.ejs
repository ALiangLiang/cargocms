
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=<%= sails.config.google.key %>"></script>
<style>
  .selectNavi {
    width: 230px;
    position: absolute;
    top: 75px;
    left: 0px;
  }
  .selectItem {
    width: 100%;
    height: 50px;

    color: #FFFFFF;
    font-size: 20px;
    font-style: normal;

    line-height: 50px;
    margin-bottom: 5px;
    padding:0 5px 0 5px;
    text-align: left;
    display: inline-block;
    background-color: #D8D8D8;
  }
  .selectItem.activate {
    background-color: #9B9B9B;
  }

  .content {
    position: relative;
    cursor: pointer;
    background-color: black;
    height: 600px;
    padding: 0;
  }
  #map {
    width: 100%;
    height: 100%;
  }
  .info {
    font-size: 20px;
    position: absolute;
    bottom: 20px;
    right: 50px;
    background-color: rgba(255,255,255,0.8);
    padding: 0 5px 0 5px;
  }
  p.infi {
    color: #959595;
  }

</style>

<div class="content">
  <div id="map"></div>
  <nav class="selectNavi nav nav-pills nav-stacked">
    <i class="selectItem activate">台中｜綠光計畫門市</i>
    <i class="selectItem">台北｜松煙誠品專櫃</i>
    <i class="selectItem">高雄｜博二門市</i>
  </nav>
</div>

<% LayoutUtils.addScriptBlock(`
// When the window has finished loading create our google map below
google.maps.event.addDomListener(window, 'load', init);

function init() {
    // Basic options for a simple Google Map
    // For more options see: https://developers.google.com/maps/documentation/javascript/reference#MapOptions
    var mapOptions = {
        // How zoomed in you want the map to start at (always required)
        zoom: 15,

        // The latitude and longitude to center the map (always required)
        center: new google.maps.LatLng(24.1475476, 120.6605335), 

        // How you would like to style the map.
        // This is where you would paste any style found on Snazzy Maps.
        styles: [{"featureType":"water","elementType":"geometry","stylers":[{"color":"#e9e9e9"},{"lightness":17}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#f5f5f5"},{"lightness":20}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffffff"},{"lightness":17}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#ffffff"},{"lightness":29},{"weight":0.2}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":18}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":16}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#f5f5f5"},{"lightness":21}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#dedede"},{"lightness":21}]},{"elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#ffffff"},{"lightness":16}]},{"elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#333333"},{"lightness":40}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#f2f2f2"},{"lightness":19}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#fefefe"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#fefefe"},{"lightness":17},{"weight":1.2}]}]
    };


  /*
    <!--div class="info">
      TODO: 
      using https://developers.google.com/maps/documentation/javascript/examples/infowindow-simple
      and  http://stackoverflow.com/questions/10342994/google-maps-api-v3-infowindow-automatically-open-on-page-load replace
      地址：台中市西區<br />
      中興一巷8號二樓C戶 綠光計畫<br />
      Tel: (04)2301-5682<br />
      營業時間：AM 09:30 ~ PM 18:30<br />
    </div-->
  */
    // map actions
    var contentString = '<div id="content">'+
        '<div id="siteNotice">'+
        '</div>'+
      '<h1 id="firstHeading" class="firstHeading">LFP 台中綠光計畫門市</h1>'+
      '<div id="bodyContent">'+
        '地址：台中市西區'+
        '中興一巷8號二樓C戶 綠光計畫<br />'+
        'Tel: (04)2301-5682<br />'+
        '營業時間：AM 09:30 ~ PM 18:30<br />'+
      '</div>'+
    '</div>';


    var infowindow = new google.maps.InfoWindow({
      content: contentString
    });

    // Get the HTML DOM element that will contain your map
    // We are using a div with id="map" seen below in the <body>
    var mapElement = document.getElementById('map');

    // Create the Google Map using our element and options defined above
    var map = new google.maps.Map(mapElement, mapOptions);

    // Let's also add a marker while we're at it
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(24.1475476, 120.6605335),
        text: "something",
        map: map,
        title: 'LFP香水實驗室',
        label: 'L',
        event: {
          click: function(e) {
            console.log("clicked",e);
          }
        }
    });

    // marker event
    marker.addListener('click', function() {
      infowindow.open(map, marker);
    });

    function initialize(){
      //infowindow.open(map); 
    } // end initialize
    //map.onload = initialize;
    google.maps.event.trigger(marker, 'click');

}
`); %>
