<script id="noneOrder" type="text/x-jquery-tmpl">
  <div class="well">
    <div class="margin-bottom-40">
      <h2>你還沒有購買任何項目喔!!</h2>
      <p><span class="brand-font">LFP</span> 香料香水實驗室的好友們，正在期待您的創作。</p>
      <a href="#" class="btn-create-recipe btn-u btn-u-sm">開始創作</a>
    </div>
  </div>
</script>

<script id="orderList" type="text/x-jquery-tmpl">
  <style>
    th.center {text-align:center}
  </style>
  <div class="well">
  <h2>訂購項目</h2>
  <table class="table">
  	<thead>
  		<tr>
        <td>訂單編號</td>
  			<th class="hidden-sm">訂購商品</th>
        <th class="center">收件人</th>
  			<th class="center">訂單狀態</th>
        <th class="center"></th>
  		</tr>
  	</thead>
  	<tbody>
      {{each data}}
  			<tr data-toggle="collapse" data-target="#${MerchantTradeNo}" class="accordion-toggle collapsed" aria-expanded="false">
          <td width="20%">${MerchantTradeNo}</td>
          <td width="20%" class="hidden-sm">${RecipeOrder.Recipe.perfumeName}</td>
          <td width="20%" align="center">${RecipeOrder.recipient}</td>
  				<td width="20%" align="center">${RecipeOrder.productionStatusDesc}</td>
          <td width="20%" align="center"><a href="/recipe/done?t=${MerchantTradeNo}" class="btn btn-success btn-xs">詳細</a></td>
  			</tr>
        <tr>
            <td colspan="6" class="hiddenRow no-padding">
              <div class="margin-bottom-20 margin-top-20 margin-right-10 margin-left-10 collapse" id="${MerchantTradeNo}" aria-expanded="false" style="height: 0px;">
                <div class="margin-bottom-10">
                  <b>收件地址:</b>
                  <p class="ng-binding">
                    ${Address}
                  </p>
                </div>
                <div class="margin-bottom-10">
                  <b>Email:</b>
                  <p class="ng-binding">
                    ${Email}
                  </p>
                </div>
                <div class="margin-bottom-10">
                  <b>發票號碼:</b>
                  <p class="ng-binding">
                    ${invoiceNo}
                  </p>
                </div>
                <div class="margin-bottom-10">
                  <b>備註:</b>
                  <p class="ng-binding">
                    ${RecipeOrder.message}
                  </p>
                </div>
                <div class="margin-bottom-10">
                  <b>建立日期:</b>
                  <p class="ng-binding">
                    ${createdAt}
                  </p>
                </div>
              </div>
            </td>
        </tr>
      {{/each}}
  	</tbody>
  </table>

  </div>
</script>

<% LayoutUtils.addScriptBlock(`
    var loadOrder = function() {
      var successCatch = function(e) {
        $('#order').empty();
        if(e.data.item.length === 0 ){
          $('#order').append($('#noneOrder').tmpl());
        } else {
          var data = e.data.item;
          var orderList = $('#orderList').tmpl({
            data: data,
          });
          $('#order').append(orderList);
        }
      }
      var failCatch = function(e) {
        console.log(e);
      }
      $.get('/api/labfnp/order').done(successCatch).fail(failCatch);
    }
`); %>
<!--=== End Content Part ===-->
